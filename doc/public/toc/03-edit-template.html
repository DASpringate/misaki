<!DOCTYPE html>
<html lang="en"><head><meta content="width=device-width, initiali-scale=1.0, user-scalable=yes" name="viewport"><title>misaki - Edit Template</title><link href="/favicon.ico" rel="shortcut icon"><link href="/atom.xml" rel="alternate" title="Edit Template" type="application/atom-xml"><link href="/css/prettify.css" rel="stylesheet" type="text/css"><link href="http://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet" type="text/css"><link href="/css/main.css" rel="stylesheet" type="text/css"><link href="/css/smartphone.css" media="only screen and (max-device-width:480px)" rel="stylesheet" type="text/css"></head><body><a class="github_ribbon" href="https://github.com/liquidz/misaki"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;"></a><div class="container"><article><div class="page-header"><a href="/"><h1><span>E</span>dit Template</h1></a><div class="tag"><ul></ul></div><p class="date"></p></div><div class="post"><h2><span>T</span>emplate file</h2><p class="paragraph">Template files are compiled with <a href="aa">hiccup</a>.</p><h3><span>E</span>xample</h3><pre class="prettyprint lang-clj">;; Define template options here
; @layout  default
; @title   misaki

;; definition your clojure function
(defn header [s] [:header [:h1 s]])

;; &quot;site&quot; variable to access template options
(header (:title site))

[:h2 &quot;Posts&quot;]
[:ul
 (for [p (:posts site)]
   [:li (:title p)])]</pre><h3><span>T</span>empalte options</h3><p class="paragraph">Template option format:</p><pre class="prettyprint lang-clj">; @key value</pre><h4><span>S</span>pecial options</h4><ul><li><span><p class="paragraph"><code class="prettyprint">layout</code>: Specify layout file.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">title</code>: Define template title.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">format</code>: Specify template format (<code class="prettyprint">"html5"</code>, <code class="prettyprint">"xhtml"</code>, <code class="prettyprint">"html4"</code>).
      No format template will be compiled by <code class="prettyprint">hiccup.core/html</code>.</p></span></li></ul><h4><span>A</span>ccess tepalte options</h4><p class="paragraph">misaki provides <code class="prettyprint">site</code> variable to access defined tempalte options. For example, you can access template title with <code class="prettyprint">(:title site)</code>.</p><h4><span>S</span>ite updated date</h4><p class="paragraph"><code class="prettyprint">(:date site)</code> is site updated date (org.joda.time.DateTime).</p><h3><span>F</span>unctions</h3><p class="paragraph">You can define your own function in template or layout. However, special variable(e.g., <code class="prettyprint">site</code> and <code class="prettyprint">contents</code>) is not accessible in those functions.</p><h3><span>P</span>osts</h3><p class="paragraph"><code class="prettyprint">(:posts site)</code> is post data list.</p><h4><span>P</span>ost data format</h4><ul><li><span><p class="paragraph"><code class="prettyprint">:title</code>: Post title.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Post url.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:date</code>: Post date (org.joda.time.DateTime).</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:file</code>: Post file (java.io.File).</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:tag</code>: Tag list for this post.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:tag-name</code>: Joined tag names. This data is only contained by tag search.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:index</code>: Index filename string generated by <code class="prettyprint"><em>url-base</em></code> and <code class="prettyprint"><em>index-name</em></code>.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">lazy-content</code>: Delayed post content. Use <code class="prettyprint">force</code> to get post content.</p></span></li></ul><h4><span>T</span>ag list format</h4><ul><li><span><p class="paragraph"><code class="prettyprint">:name</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Tag page URL.</p></span></li></ul><h3><span>P</span>ost tags</h3><p class="paragraph"><code class="prettyprint">(:tags site)</code> is all post's tag data list.</p><h4><span>T</span>ag data format</h4><ul><li><span><p class="paragraph"><code class="prettyprint">:name</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:url</code>: Tag page URL.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">:count</code>: Tag counts.</p></span></li></ul><h3><span>C</span>ode Highlight</h3><p class="paragraph">Codes are highlighted by <a href="http://code.google.com/p/google-code-prettify/">google-code-prettify</a>.</p><pre class="prettyprint lang-clj">#-CODE
(println &quot;hello&quot;)
CODE</pre><p class="paragraph"><code class="prettyprint">CODE</code> can be replaced by any string.</p><p class="paragraph">If you define highlight setting, <code class="prettyprint">CODE</code> string specifies a language.
   To define highlight setting, see <a href="aa">Highlight Setting</a>.</p><h2><span>L</span>ayout file</h2><h3><span>E</span>xample</h3><p class="paragraph">Layout options is same as template options.</p><pre class="prettyprint lang-clj">; @title  default title
; @format html5

[:head
 [:title (:title site)]]
[:body contents]</pre><h4><span>S</span>pecial variable</h4><ul><li><span><p class="paragraph"><code class="prettyprint">site</code>: Variable to access layout options.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">contents</code>: Variable to handle template contents.</p></span></li></ul><h4><span>L</span>ayout in layout</h4><p class="paragraph">Layout file can contain <code class="prettyprint">:layout</code> option.</p><ul><li>default.clj<pre class="prettyprint lang-clj">; @title  default title
; @format html5
[:head [:title (:title site)]]
[:body contents]</pre></li><li>post.clj<pre class="prettyprint lang-clj">; @layout default
; @title  post default title
[:h1 (:title site)]
contents</pre></li></ul><h3><span>T</span>ag layout</h3><p class="paragraph">Tag layout which is defined as <code class="prettyprint">:tag-layout</code> in _config.clj has special <code class="prettyprint">site</code> keyword.</p><ul><li><span><p class="paragraph"><code class="prettyprint">(:tag-name site)</code>: Tag name.</p></span></li><li><span><p class="paragraph"><code class="prettyprint">(:posts site)</code>: Post list which contains the tag.</p></span></li></ul><p class="back">&raquo; <a href="/">Back to Top</a></p></div></article><footer class="footer"><p><a href="http://twitter.com/uochan">@uochan</a>&nbsp; 2012</p><p>generated by <a href="https://github.com/liquidz/misaki"><img alt="misaki banner" src="/img/misaki_banner.png"></a></p></footer></div><script src="/js/prettify.js" type="text/javascript"></script><script src="/js/lang-clj.js" type="text/javascript"></script><script src="/js/main.js" type="text/javascript"></script></body></html>